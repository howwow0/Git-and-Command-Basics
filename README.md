# Шпаргалка по Git и командной строке

## Навигация по файловой системе

- **`pwd`** - Показать рабочую папку.
- **`ls`** - Показать файлы и папки в текущей папке.
- **`ls -a`** - Показать также скрытые файлы и папки (начинаются с `. `).
- **`cd <папка>`** - Перейти в указанную папку.
- **`cd ..`** - Перейти на уровень выше.
- **`cd ~`** - Перейти в домашнюю директорию.
- **`cd /`** - Перейти в корневую директорию.

## Работа с файлами и папками

### Создание

- **`touch <файл>`** - Создать файл в текущей папке.
- **`mkdir <папка>`** - Создать папку в текущей папке.

### Копирование и перемещение

- **`cp <файл> <место>`** - Копировать файл в указанное место.
- **`mv <файл> <место>`** - Переместить файл или папку в указанное место.

### Чтение

- **`cat <файл>`** - Показать содержимое файла.

### Удаление

- **`rm <файл>`** - Удалить файл.
- **`rmdir <папка>`** - Удалить пустую папку.
- **`rm -r <папка>`** - Удалить папку и всё её содержимое.

### Полезные возможности

- Выполнение нескольких команд: **`команда1 && команда2`**.
- Перемещение по истории команд: **`↑`** и **`↓`**.
- Автодополнение команд: Наберите первые символы и нажмите **`Tab`**.

## Инициализация репозитория

- **`git init`** - Инициализировать репозиторий.

## Синхронизация локального и удалённого репозиториев

- **`git remote add origin <URL>`** - Привязать локальный репозиторий к удалённому.
- **`git remote -v`** - Проверить привязанные удалённые репозитории.
- **`git push -u origin <ветка>`** - Загрузить коммиты в удалённый репозиторий.
- **`git push`** - Загрузить коммиты в удалённый репозиторий после первоначальной привязки.

## Подготовка файла к коммиту

- **`git add <файл>`** - Подготовить файл к коммиту.
- **`git add --all`** - Подготовить все изменения и новые файлы.
- **`git add .`** - Подготовить текущую папку и все файлы в ней.

## Создание и публикация коммита

- **`git commit -m "Комментарий"`** - Сделать коммит с комментарием.
- **`git push`** - Отправить изменения в удалённый репозиторий.

## Просмотр информации о коммитах

- **`git log`** - Показать историю коммитов.
- **`git log --oneline`** - Показать краткую информацию о коммитах.

## Просмотр состояния файлов

- **`git status`** - Показать текущее состояние репозитория.

## Добавление изменений в последний коммит

- **`git commit --amend --no-edit`** - Добавить изменения к последнему коммиту (сохранить сообщение).
- **`git commit --amend -m "Новое сообщение"`** - Изменить сообщение последнего коммита.

## Откат файлов и коммитов

- **`git restore --staged <файл>`** - Перевести файл из staged обратно в untracked или modified.
- **`git restore <файл>`** - Вернуть файл к последней сохранённой версии.
- **`git reset --hard <хеш>`** - Удалить все незакоммиченные изменения до указанного коммита.

## Просмотр изменений

- **`git diff`** - Показать изменения в рабочей зоне.
- **`git diff <коммит1> <коммит2>`** - Показать разницу между двумя коммитами.
- **`git diff --staged`** - Показать изменения, которые добавлены в staged-файлах.

## Клонирование чужого репозитория

- **`git clone <URL>`** - Склонировать репозиторий с указанного URL.

## Создание веток

- **`git branch <ветка>`** - Создать новую ветку.
- **`git checkout -b <ветка>`** - Создать ветку и сразу переключиться на неё.

## Навигация по веткам

- **`git branch`** - Показать все ветки и текущую ветку.
- **`git branch -a`** - Показать все ветки (локальные и удалённые).
- **`git checkout <ветка>`** - Переключиться на указанную ветку.

## Сравнение веток

- **`git diff <ветка1> <ветка2>`** - Показать разницу между двумя ветками.
- **`git diff HEAD~2 HEAD`** - Показать разницу между двумя коммитами.

## Удаление веток

- **`git branch -d <ветка>`** - Удалить ветку (если она объединена с main).
- **`git branch -D <ветка>`** - Удалить ветку (независимо от объединения).

## Слияние веток

- **`git merge <ветка>`** - Объединить указанную ветку с текущей.

## Работа с удалённым репозиторием

- **`git push -u origin <ветка>`** - Отправить новую ветку в удалённый репозиторий.
- **`git push <ветка>`** - Отправить изменения в удалённый репозиторий.
- **`git pull`** - Подтянуть изменения из удалённого репозитория в текущую ветку.

## Полезные советы

- Для изменения сообщения последнего коммита используйте `git commit --amend`.
- Используйте `git stash` для временного хранения незакоммиченных изменений.
- Для просмотра различий между текущими файлами и последним коммитом используйте `git diff`.

## Feature Branch Workflow

Самый популярный подход к работе с Git в команде — это feature branch workflow. В нём создают ветку для каждой задачи (например, для новой функциональности или исправления бага), а когда всё готово, вливают новую ветку в main.

### Важные этапы этого процесса

- **Пул-реквест** (PR) — это интерфейс, в котором можно обсудить изменения.
- **Ревью изменений** — просмотр изменений другими участниками и один из способов проверить качество таких изменений.

## Шаги процесса

1. **Склонировать репозиторий**. Если вы не участник проекта, предварительно сделать «форк» исходного репозитория.
2. **Создать ветку для задачи**: `git checkout -b my-task-branch-name`.
3. **Добавить и закоммитить изменения**, которые вы хотите внести в проект.
4. **Запушить ветку**: `git push --set-upstream origin HEAD` или `git push -u origin my-task-branch-name`.
5. **Создать пул-реквест**:
   - GitHub (с помощью Git) выведет ссылку на создание PR. По ней нужно перейти.
   - PR можно также создать через интерфейс GitHub.
6. **Сообщить о пул-реквесте ревьюеру**. Иногда ревьюеры назначаются автоматически, тогда сообщать не нужно.
7. **Обсуждать с ревьюером предлагаемые изменения** и вносить правки, пока эти изменения не будут одобрены (пока не будет получен «апрув»).

## Разрешение конфликтов слияния

Когда один и тот же файл меняется в нескольких ветках, при их слиянии может произойти конфликт. Пугаться конфликтов не нужно, это нормальная часть работы с системами контроля версий. IDE, вроде VSCode или Intellij IDEA, помогут «склеить» файл из двух конфликтующих версий.

### Алгоритм-шпаргалка для разрешения конфликтов слияния

1. **Открыть проект в IDE** (VS Code, IDEA или другие).
2. **Открыть файл, в котором есть конфликт**.
3. **Выбрать, какие части файла нужно взять из одной ветки, а какие — из другой**.
4. **Сделать коммит**: `git commit --no-edit` или `git commit -m 'merge branch <название ветки>'`.

## Алгоритм-шпаргалка для создания PR

1. **Склонировать репозиторий**:
   - На странице репозитория или «форка» нажать кнопки: Code → SSH → скопировать ссылку.
   - Выполнить команду `git clone <ссылка на репозиторий>`.
2. **Создать ветку для вашей задачи**: `git checkout -b my-task-branch-name`.
3. **Добавить и закоммитить изменения**, которые вы хотите внести в проект.
4. **Запушить ветку**: `git push --set-upstream origin HEAD` или `git push -u origin my-task-branch-name`.
5. **Создать пул-реквест**:
   - GitHub (с помощью Git) выведет ссылку на создание PR. По ней нужно перейти.
   - PR можно также создать через интерфейс GitHub.
6. **Сообщить о пул-реквесте ревьюеру**. Иногда ревьюеры назначаются автоматически, тогда сообщать не нужно.
7. **Обсуждать с ревьюером предлагаемые изменения** и вносить правки, пока эти изменения не будут одобрены (пока не будет получен «апрув»).

### Если кто-то добавил конфликтующие изменения в main, пока ваш PR был на ревью, нужно разрешить конфликт:

1. **Обновить main**: `git checkout main && git pull`.
2. **Влить main в свою ветку**: `git checkout my-task-branch-name && git merge main`.
3. **Разрешить конфликты слияния** с помощью IDE или вручную.
4. **Создать коммит слияния**: `git commit --no-edit` или `git commit -m 'merge main'`.
5. **Сделать git push своей ветки**.
6. **Нажать кнопку Merge** или подождать, пока её нажмёт кто-то ещё.
7. **Обновить main**, чтобы «подтянуть» ваши изменения в основную ветку локального репозитория: `git checkout main && git pull`.

